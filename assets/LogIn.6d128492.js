import{_ as g,o as c,c as p,H as u,M as m,p as o,N as a,z as w,A as b,u as T,S as x,r as y,t as _,w as k,O as f,L as v,a as C}from"./index.210d9260.js";import{_ as L,a as I}from"./facebook.3ad5400a.js";import{g as F}from"./google.40b4dfe7.js";const B={name:"LoginByCode",data(){return{userForm:{email:""}}},methods:{keyenter1(){this.$emit("pchecked",this.userForm)},keydelete(){this.$emit("deleted",this.userForm)}}},P={class:"login-code d-flex flex-wrap justify-content-center"};function j(l,e,i,d,n,s){return c(),p("div",P,[u(o("input",{class:"input","onUpdate:modelValue":e[0]||(e[0]=t=>n.userForm.email=t),onKeyup:[e[1]||(e[1]=a((...t)=>s.keydelete&&s.keydelete(...t),["delete"])),e[2]||(e[2]=a((...t)=>s.keyenter1&&s.keyenter1(...t),["tab"])),e[3]||(e[3]=a((...t)=>s.keyenter1&&s.keyenter1(...t),["enter"]))],onBlur:e[4]||(e[4]=(...t)=>s.keyenter1&&s.keyenter1(...t)),placeholder:"\u8ACB\u8F38\u5165\u4FE1\u7BB1"},null,544),[[m,n.userForm.email]])])}const N=g(B,[["render",j],["__scopeId","data-v-a9779a0f"]]);const V={name:"LoginByPwd",data(){return{userForm:{username:"",password:""}}},methods:{keyenter1(){this.$emit("checked",this.userForm)},keydelete(){this.$emit("deleted",this.userForm)}}},D=l=>(w("data-v-adbbd851"),l=l(),b(),l),U={class:"inpuForm d-flex flex-wrap justify-content-center"},K=D(()=>o("br",null,null,-1));function M(l,e,i,d,n,s){return c(),p("div",U,[u(o("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>n.userForm.username=t),onKeyup:[e[1]||(e[1]=a((...t)=>s.keydelete&&s.keydelete(...t),["delete"])),e[2]||(e[2]=a((...t)=>s.keyenter1&&s.keyenter1(...t),["tab"])),e[3]||(e[3]=a((...t)=>s.keyenter1&&s.keyenter1(...t),["enter"]))],placeholder:"\u5E33\u865F"},null,544),[[m,n.userForm.username]]),K,u(o("input",{type:"password","onUpdate:modelValue":e[4]||(e[4]=t=>n.userForm.password=t),onKeyup:[e[5]||(e[5]=a((...t)=>s.keydelete&&s.keydelete(...t),["delete"])),e[6]||(e[6]=a((...t)=>s.keyenter1&&s.keyenter1(...t),["tab"])),e[7]||(e[7]=a((...t)=>s.keyenter1&&s.keyenter1(...t),["enter"]))],onBlur:e[8]||(e[8]=(...t)=>s.keyenter1&&s.keyenter1(...t)),placeholder:"\u5BC6\u78BC"},null,544),[[m,n.userForm.password]])])}const O=g(V,[["render",M],["__scopeId","data-v-adbbd851"]]);const A={setup(){return T(),{}},components:{LoginByCode:N,LoginByPwd:O},name:"LogIn",data(){return{logonType:"pwd",msg:"\u767B\u5165",msg1:"\u767B\u5165",a:"",b:"",info:null,users:[],passwords:[],chemail:[],token:""}},methods:{paddchick(l){this.chemail.push(l.email)},pdeletechick(){this.chemail.splice(0)},addchick(l){console.log(l.username,l.password),this.users.push(l.username),this.passwords.push(l.password)},deletechick(){this.users.splice(0),this.passwords.splice(0)},onSubmit(){let l=this.users[this.users.length-1],e=this.passwords[this.passwords.length-1];if(this.$data.logonType==="pwd")fetch("https://astria.sutsanyuan.com/Astria_api/Login",{method:"POST",headers:{"Content-Type":"application/json;charset =utf-8"},body:JSON.stringify({Email:l,Password:e})}).then(function(i){return i.json()}).then(i=>{console.log(i),console.log(i.Msg),this.a=i.Msg,console.log(this.a),this.a=="\u5C1A\u672A\u8A3B\u518A\u5B8C\u6210"&&(localStorage.setItem("myemail",`${this.users[this.users.length-1]}`),localStorage.setItem("mymsg",`${this.a}`),this.$router.push("/signUpForm")),this.a=="\u767B\u5165\u6210\u529F"?(localStorage.setItem("token","ImLogin"),localStorage.setItem("myemail",`${this.users[this.users.length-1]}`),localStorage.setItem("mymsg",`${this.a}`),this.$store.commit("loginSet",i.Req),this.$store.state.isLogIn=!0,this.$router.push("/")):x.fire({title:"\u5BC6\u78BC\u932F\u8AA4",text:"\u8ACB\u5617\u8A66\u91CD\u65B0\u8F38\u5165\u4E00\u6B21\uFF0C\u6216\u9EDE\u9078\u5FD8\u8A18\u5BC6\u78BC",iconColor:"rgba(0,2,53,0.3)",showConfirmButton:!1}).then(d=>{})}).catch(function(i){console.log(i)});else{let i=this.chemail.length,d=this.chemail[i-1];console.log(d),fetch("https://astria.sutsanyuan.com/Astria_api/ForgottenPWD",{method:"post",headers:{"Content-Type":"application/json;charset =utf-8"},body:JSON.stringify({Email:d})}).then(function(n){return n.json()}).then(n=>{console.log(n),this.b=n.Status,this.b=="1"&&(this.$data.logonType="pwd",console.log("\u5FD8\u8A18\u5BC6\u78BC"),this.msg1="\u767B\u5165",this.msg="\u767B\u5165")}).catch(function(n){console.log(n)})}},onChangeLoginType(){this.$data.logonType==="pwd"?(this.$data.logonType="code",this.msg="\u9001\u51FA",this.msg1="\u5FD8\u8A18\u5BC6\u78BC"):(this.$data.logonType="pwd",this.msg="\u767B\u5165",this.msg1="\u767B\u5165"),console.log("\u5207\u63DB\u767B\u5165\u65B9\u5F0F")},singupTo(){this.$router.push("/signUp")}}},h=l=>(w("data-v-20ae670b"),l=l(),b(),l),E={class:"BG"},J={class:"container-xl my-5"},q={class:"login-containt"},z={class:"row justify-content-between align-items-center"},G=h(()=>o("div",{class:"col-12 col-lg-4"},[o("div",{class:"card pic"},[o("img",{src:L,alt:"logo"})])],-1)),H={class:"col-12 col-lg-7"},R={class:"card inputform"},W={class:"d-flex justify-content-center flex-wrap"},Q=h(()=>o("h5",null,"\u5FD8\u8A18\u5BC6\u78BC",-1)),X=[Q],Y=h(()=>o("h5",null,"\u56DE\u4E0A\u4E00\u9801",-1)),Z=[Y],$={class:"d-flex txt"},ee={class:"sign-up d-flex justify-content-between"},se=h(()=>o("span",{class:"h5 m-4"},"\u9084\u4E0D\u662F\u6703\u54E1?",-1)),te=C('<div class="outlink" data-v-20ae670b><hr data-v-20ae670b><p data-v-20ae670b><span data-v-20ae670b>\u6216\u8ACB\u4F7F\u7528\u4EE5\u4E0B\u65B9\u5F0F\u767B\u5165</span></p><div class="d-flex img-d" data-v-20ae670b><div class="image" data-v-20ae670b><img src="'+F+'" alt="google" data-v-20ae670b></div><div class="image" data-v-20ae670b><img src="'+I+'" alt="facebook" data-v-20ae670b></div></div></div>',1);function oe(l,e,i,d,n,s){const t=y("login-by-code"),S=y("login-by-pwd");return c(),p("div",E,[o("div",J,[o("div",q,[o("div",z,[G,o("div",H,[o("div",R,[o("h2",null,_(n.msg1),1),n.logonType==="code"?(c(),k(t,{key:0,onPchecked:s.paddchick,onPdeleted:s.pdeletechick},null,8,["onPchecked","onPdeleted"])):f("",!0),n.logonType==="pwd"?(c(),k(S,{key:1,onChecked:s.addchick,onDeleted:s.deletechick},null,8,["onChecked","onDeleted"])):f("",!0),o("div",W,[o("button",{id:"login",class:"login-button m-2",onClick:e[0]||(e[0]=(...r)=>s.onSubmit&&s.onSubmit(...r))},[o("h5",null,_(n.msg),1)]),u(o("button",{class:"change-login-type m-2",onClick:e[1]||(e[1]=(...r)=>s.onChangeLoginType&&s.onChangeLoginType(...r))},X,512),[[v,n.logonType==="pwd"]]),u(o("button",{class:"change-login-type m-2",onClick:e[2]||(e[2]=(...r)=>s.onChangeLoginType&&s.onChangeLoginType(...r))},Z,512),[[v,n.logonType==="code"]])]),o("div",$,[o("div",ee,[se,o("span",{class:"t1 h5 m-4",onClick:e[3]||(e[3]=(...r)=>s.singupTo&&s.singupTo(...r))},"\u7ACB\u5373\u8A3B\u518A")]),te])])])])])])])}const ae=g(A,[["render",oe],["__scopeId","data-v-20ae670b"]]);export{ae as default};
